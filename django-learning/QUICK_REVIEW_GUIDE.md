# ğŸš€ Quick Review Guide - Django REST Framework Refresh

**You've completed 99% of the course!** This guide helps you quickly refresh key concepts without overwhelming you.

---

## ğŸ¯ The Reality Check

**You haven't forgotten everything!** Your code is still there, working. You just need to:
1. **Reactivate** your knowledge (not relearn)
2. **Practice** with hands-on exercises
3. **Build confidence** by using what you've learned

---

## ğŸ“š Core Concepts Quick Reference

### 1. **Django REST Framework Flow** (The Big Picture)

```
Request â†’ URL Router â†’ ViewSet/View â†’ Serializer â†’ Model â†’ Database
                â†“
         Permissions Check
                â†“
         Throttling Check
                â†“
         Response â† Serializer â† Model â† Database
```

**Key Point:** Every request goes through this flow. Understanding this makes everything else easier.

---

### 2. **ViewSet vs Function Views** (When to Use What)

| Feature | Function Views | ViewSets |
|---------|---------------|----------|
| **Use Case** | Simple, custom logic | Standard CRUD operations |
| **Code** | More code, more control | Less code, automatic |
| **URLs** | Manual path() | Auto-generated by router |
| **Example** | `@api_view(['GET'])` | `ModelViewSet` |

**Your Project Uses:** ViewSets (ProductViewSet) - modern, efficient approach!

---

### 3. **Serializers** (Data Transformation)

**What they do:**
- Convert Python objects â†’ JSON (for responses)
- Convert JSON â†’ Python objects (for requests)
- Validate data before saving

**Key Methods:**
```python
# Field-level validation
def validate_price(self, value):
    if value <= 0:
        raise ValidationError("Price must be positive")
    return value

# Object-level validation (multiple fields)
def validate(self, data):
    price = data.get('price')
    stock = data.get('stock')
    # Check multiple fields together
    return data

# Custom create/update
def create(self, validated_data):
    # Set created_by from request.user
    return Product.objects.create(**validated_data)
```

**Your Project Has:** ProductSerializer with all these features!

---

### 4. **Permissions** (Who Can Do What)

**Two Types:**
1. **has_permission** - Check before seeing the view (view-level)
2. **has_object_permission** - Check before modifying specific object (object-level)

**Your Project Uses:**
- `IsAuthenticatedOrReadOnly` (global default) - Anyone can read, only authenticated can write
- `IsOwnerOrReadOnly` - Only owner can modify their products

**Flow:**
```
Request â†’ has_permission? â†’ YES â†’ has_object_permission? â†’ YES â†’ Action allowed
```

---

### 5. **Database Optimization** (N+1 Problem)

**The Problem:**
```python
# BAD: Makes N+1 queries
products = Product.objects.all()  # 1 query
for product in products:
    print(product.created_by.username)  # N queries (one per product)
# Total: 1 + N queries âŒ
```

**The Solution:**
```python
# GOOD: Makes only 2 queries
products = Product.objects.select_related('created_by').all()  # 1 query with JOIN
for product in products:
    print(product.created_by.username)  # No extra queries!
# Total: 1 query âœ…
```

**Your Project Uses:** `select_related('created_by').prefetch_related('images')`

**Remember:**
- `select_related()` â†’ For ForeignKey (one-to-one, many-to-one)
- `prefetch_related()` â†’ For reverse ForeignKey (one-to-many, many-to-many)

---

### 6. **Caching** (Speed Up Your API)

**The Flow:**
```
First Request:  Database â†’ Calculate â†’ Cache â†’ Return
Second Request: Cache â†’ Return (FAST!)
After Update:   Delete Cache â†’ Next request gets fresh data
```

**Your Project Has:**
- Manual caching in `list()` method
- Cache invalidation in `perform_create()`, `perform_update()`, `perform_destroy()`

**Key Functions:**
- `cache.get(key)` - Get from cache
- `cache.set(key, value, timeout)` - Save to cache
- `cache.delete(key)` - Remove from cache

---

### 7. **Filtering & Search** (Find What You Need)

**Your Project Uses:**
- `DjangoFilterBackend` - Filter by price_min, price_max, in_stock
- `SearchFilter` - Search in name and description
- `OrderingFilter` - Sort by price, stock, created_at

**Example URLs:**
```
/products/?price_min=10&price_max=100
/products/?search=laptop
/products/?ordering=-price
```

---

### 8. **Throttling** (Rate Limiting)

**Purpose:** Prevent abuse, protect your API

**Your Project Has:**
- Default throttles (5/min anonymous, 100/min authenticated)
- Custom `BurstRateThrottle` for product creation (3/min)

**Flow:**
```
Request â†’ Check throttle â†’ Allowed? â†’ Process request
                      â†“
                  Rate limit exceeded â†’ Return 429 Too Many Requests
```

---

### 9. **Security** (Protect Your App)

**Your Project Has:**
- XSS protection (validate_no_scripts validator)
- CSRF protection (Django built-in)
- SQL injection protection (Django ORM)
- Secure cookies (HttpOnly, SameSite)
- CORS configuration (for frontend)

**Key Settings:**
- `SECURE_BROWSER_XSS_FILTER = True`
- `X_FRAME_OPTIONS = 'DENY'`
- `SESSION_COOKIE_SECURE = True` (production)

---

### 10. **Deployment** (Production Ready)

**Your Project Has:**
- Docker setup (Dockerfile, docker-compose.yml)
- Gunicorn (production WSGI server)
- Nginx (reverse proxy)
- Railway deployment configuration
- Environment variables (.env file)

**Key Files:**
- `Dockerfile` - Builds your app image
- `docker-compose.yml` - Orchestrates containers
- `entrypoint.sh` - Runs migrations on startup
- `railway.json` - Railway deployment config

---

## ğŸ‹ï¸ Hands-On Practice Exercises

**Do these in order - they're designed to refresh your memory:**

### Exercise 1: Review Your Code (15 minutes)
1. Open `products/models.py` - Read the Product model
2. Open `products/serializers.py` - Understand the validation logic
3. Open `products/viewsets.py` - See how everything connects
4. **Goal:** Remind yourself what you built

### Exercise 2: Test Your API (10 minutes)
1. Start your server: `python manage.py runserver`
2. Visit: `http://localhost:8000/api/docs/` (Swagger UI)
3. Try these:
   - GET `/products/` - List all products
   - POST `/products/` - Create a product (need auth)
   - GET `/products/{id}/` - Get one product
   - GET `/products/statistics/` - See statistics
4. **Goal:** See your API working

### Exercise 3: Add a Simple Feature (20 minutes)
**Task:** Add a "featured" boolean field to Product model

**Steps:**
1. Add `featured = models.BooleanField(default=False)` to Product model
2. Run `python manage.py makemigrations`
3. Run `python manage.py migrate`
4. Add `featured` to serializer fields
5. Test in Swagger UI

**Goal:** Practice the workflow (model â†’ migration â†’ serializer â†’ test)

### Exercise 4: Explain Out Loud (10 minutes)
Pick any concept from above and explain it to yourself (or a rubber duck):
- "How does caching work in my project?"
- "What's the difference between select_related and prefetch_related?"
- "How do permissions work in DRF?"

**Goal:** If you can explain it, you understand it!

---

## ğŸ“ Interview-Ready Checklist

**Can you explain these?** (Check off as you review)

- [ ] **DRF Architecture:** Request â†’ View â†’ Serializer â†’ Model flow
- [ ] **ViewSets vs Views:** When to use each
- [ ] **Serializers:** Validation, create(), update(), SerializerMethodField
- [ ] **Permissions:** has_permission vs has_object_permission
- [ ] **Database Optimization:** N+1 problem, select_related, prefetch_related
- [ ] **Caching:** When to cache, when to invalidate
- [ ] **Filtering:** DjangoFilterBackend, SearchFilter, OrderingFilter
- [ ] **Throttling:** Rate limiting concepts
- [ ] **Security:** XSS, CSRF, secure cookies
- [ ] **Deployment:** Docker, Gunicorn, Nginx basics

**If you can check all 10, you're interview-ready!** ğŸ‰

---

## ğŸ’¡ Memory Tips

1. **Don't Memorize, Understand:**
   - Focus on WHY something works, not just HOW
   - Your code is the best reference - read it!

2. **Practice Regularly:**
   - Spend 30 minutes every few days reviewing
   - Build small features to reinforce concepts

3. **Use Your Project:**
   - Your codebase is a living reference
   - When you forget something, look at your code first

4. **Explain to Others:**
   - Teaching is the best way to learn
   - Even explaining to yourself helps!

---

## ğŸš€ Next Steps

1. **Today:** Do Exercise 1 & 2 (review code, test API)
2. **This Week:** Do Exercise 3 (add a feature)
3. **Before Interview:** Review this guide + do Exercise 4

**Remember:** You've built a production-ready Django REST API. That's impressive! The knowledge is there - you just need to reactivate it.

---

## ğŸ“– Quick Reference: Common Patterns

### Creating a Product (Flow)
```
POST /products/
  â†’ ProductViewSet.create()
  â†’ ProductSerializer.validate() (field + object level)
  â†’ ProductSerializer.create()
  â†’ Product.objects.create()
  â†’ Cache invalidation
  â†’ Response
```

### Getting Products (Flow)
```
GET /products/
  â†’ ProductViewSet.list()
  â†’ Check cache â†’ Found? Return cached
  â†’ Not found? Query DB with select_related/prefetch_related
  â†’ Serialize with ProductSerializer
  â†’ Cache result
  â†’ Return response
```

### Updating a Product (Flow)
```
PATCH /products/{id}/
  â†’ ProductViewSet.partial_update()
  â†’ IsOwnerOrReadOnly.has_object_permission() â†’ Check if owner
  â†’ ProductSerializer.validate()
  â†’ ProductSerializer.update()
  â†’ instance.save()
  â†’ Cache invalidation
  â†’ Response
```

---

**You've got this!** ğŸ¯ Your project is proof you know Django REST Framework. Now just refresh and practice!

